import{D as V,h as c}from"./DataTable-2f4cad11.js";import{_ as M,d as f,h as p,i as y,a as D,r as a,o as h,c as A,b as l,w as o,F as B,e as s,j as C,g as b,n as I,t as N}from"./app-4793bf98.js";const U={components:{DataTable:V},data(){return{apiUrl:c("category.getData"),searchableCols:["name"],statuses:["ACT","DSBL"],filters:null,deleteCategoriesDialog:!1,selectedCategories:null,isDeleteSingleCategory:!1,deleteId:null}},props:{can:{type:Object,default:()=>({})}},methods:{addNew(){f.Inertia.get(c("category.create"))},show(t){f.Inertia.get(c("category.show",t))},edit(t){f.Inertia.get(c("category.edit",t),{isTriggeredFromTable:!0})},initFilters(){this.filters={global:{value:null,matchMode:p.CONTAINS},name:{operator:y.AND,constraints:[{value:null,matchMode:p.STARTS_WITH}]},code:{operator:y.AND,constraints:[{value:null,matchMode:p.STARTS_WITH}]},status:{operator:y.OR,constraints:[{value:null,matchMode:p.EQUALS}]}}},confirmMultipleDeleteSelected(){this.deleteCategoriesDialog=!0},confirmSingleDeleteSelected(t){this.deleteCategoriesDialog=!0,this.isDeleteSingleCategory=!0,this.deleteId=t},deleteCategories(){this.isDeleteSingleCategory?D.delete(c("category.destroy",this.deleteId)).then(t=>{t.data.success&&this.$refs.categoryTbl.loadLazyData()}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})}):D.delete(c("category.deleteMultipleRecord",{categoryList:this.selectedCategories})).then(t=>{t.data.success&&this.$refs.categoryTbl.loadLazyData()}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})}),this.deleteId=null,this.selectedCategories=null,this.isDeleteSingleCategory=!1,this.deleteCategoriesDialog=!1},deleteBtnStatus(t){this.selectedCategories=t}},created(){this.initFilters()}},F={class:"mx-auto flex container items-center justify-center mt-4"},L={class:"rounded w-full p-2 bg-white"},z=s("div",{class:"bg-white shadow sm:rounded-lg px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},[s("header",null,[s("h2",{class:"text-2xl font-bold text-gray-900"}," Categories ")])],-1),E=s("div",{class:"confirmation-content"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Are you sure you want to delete the selected record(s)?")],-1);function H(t,m,g,O,i,r){const S=a("Head"),d=a("Column"),_=a("InputText"),w=a("Dropdown"),u=a("Button"),x=a("DataTable"),v=a("Dialog"),T=a("Toast"),k=a("MenuSideBar");return h(),A(B,null,[l(S,{title:"Categories"}),l(k,null,{default:o(()=>[s("div",F,[s("div",L,[z,l(x,{ref:"categoryTbl",apiUrl:i.apiUrl,columnFilters:i.filters,searchableColumns:i.searchableCols,can:g.can,onAddNew:r.addNew,onConfirmMultipleDeleteSelected:r.confirmMultipleDeleteSelected,onDeleteBtnStatus:r.deleteBtnStatus},{default:o(()=>[g.can.delete?(h(),C(d,{key:0,selectionMode:"multiple",headerStyle:"width: 3em"})):b("",!0),l(d,{field:"name",header:"Name",sortable:!0,style:{"min-width":"12rem"}},{filter:o(({filterModel:e})=>[l(_,{type:"text",modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(d,{field:"code",header:"Code",sortable:!0,style:{"min-width":"12rem"}},{filter:o(({filterModel:e})=>[l(_,{type:"text",modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,class:"p-column-filter",placeholder:"Search by code"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(d,{field:"sequence",header:"Sequence",sortable:!0,style:{"min-width":"12rem"}}),l(d,{field:"status",header:"Status",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:o(e=>[s("span",{class:I("text-white p-2 rounded-md "+(e.data.status==="ACT"?"bg-green-500":"bg-red-500"))},N(e.data.status),3)]),filter:o(({filterModel:e})=>[l(w,{modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,options:i.statuses,placeholder:"Any",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),l(d,{field:"actions",header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:o(e=>[l(u,{icon:"pi pi-eye",class:"p-button-rounded bg-[#0078d4]",style:{"margin-right":"5px"},onClick:n=>r.show(e.data.id)},null,8,["onClick"]),g.can.edit?(h(),C(u,{key:0,icon:"pi pi-pencil",class:"p-button-rounded p-button-warning",style:{"margin-right":"5px"},onClick:n=>r.edit(e.data.id)},null,8,["onClick"])):b("",!0),g.can.delete?(h(),C(u,{key:1,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:n=>r.confirmSingleDeleteSelected(e.data.id)},null,8,["onClick"])):b("",!0)]),_:1})]),_:1},8,["apiUrl","columnFilters","searchableColumns","can","onAddNew","onConfirmMultipleDeleteSelected","onDeleteBtnStatus"])])]),l(v,{visible:i.deleteCategoriesDialog,"onUpdate:visible":m[1]||(m[1]=e=>i.deleteCategoriesDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[l(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:m[0]||(m[0]=e=>i.deleteCategoriesDialog=!1)}),l(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:r.deleteCategories},null,8,["onClick"])]),default:o(()=>[E]),_:1},8,["visible"]),l(T)]),_:1})],64)}const q=M(U,[["render",H]]);export{q as default};
