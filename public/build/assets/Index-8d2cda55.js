import{D as M,h as d}from"./DataTable-85537002.js";import{_ as P,d as y,h,i as f,a as _,r as o,o as g,c as V,b as l,w as s,F as B,e as a,j as b,g as D,t as S,n as U}from"./app-b81587af.js";const I={components:{DataTable:M},data(){return{apiUrl:d("post.getData"),searchableCols:["title"],statuses:["ACT","DSBL"],categoryArray:[],filters:null,deletePostsDialog:!1,selectedPosts:null,isDeleteSinglePost:!1,deleteId:null}},props:{can:{type:Object,default:()=>({})}},methods:{addNew(){y.Inertia.get(d("post.create"))},show(t){y.Inertia.get(d("post.show",t))},edit(t){y.Inertia.get(d("post.edit",t),{isTriggeredFromTable:!0})},initFilters(){this.filters={global:{value:null,matchMode:h.CONTAINS},title:{operator:f.AND,constraints:[{value:null,matchMode:h.STARTS_WITH}]},category_id:{operator:f.OR,constraints:[{value:null,matchMode:h.EQUALS}]},status:{operator:f.OR,constraints:[{value:null,matchMode:h.EQUALS}]}}},getCategoryArray(){_.get(d("category.getCategoryArray")).then(t=>{this.categoryArray=t.data}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})})},confirmMultipleDeleteSelected(){this.deletePostsDialog=!0},confirmSingleDeleteSelected(t){this.deletePostsDialog=!0,this.isDeleteSinglePost=!0,this.deleteId=t},deletePosts(){this.isDeleteSinglePost?_.delete(d("post.destroy",this.deleteId)).then(t=>{t.data.success&&this.$refs.postTbl.loadLazyData()}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})}):_.delete(d("post.deleteMultipleRecord",{postList:this.selectedPosts})).then(t=>{t.data.success&&this.$refs.postTbl.loadLazyData()}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})}),this.deleteId=null,this.selectedPosts=null,this.isDeleteSinglePost=!1,this.deletePostsDialog=!1},deleteBtnStatus(t){this.selectedPosts=t}},created(){this.initFilters(),this.getCategoryArray()}},N={class:"mx-auto flex container items-center justify-center mt-4"},F={class:"rounded w-full p-2 bg-white"},L=a("div",{class:"bg-white shadow sm:rounded-lg px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},[a("header",null,[a("h2",{class:"text-2xl font-bold text-gray-900"},"Posts")])],-1),E=a("div",{class:"confirmation-content"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Are you sure you want to delete the selected record(s)?")],-1);function O(t,m,p,z,n,r){const w=o("Head"),c=o("Column"),v=o("InputText"),C=o("Dropdown"),u=o("Button"),x=o("DataTable"),A=o("Dialog"),T=o("Toast"),k=o("MenuSideBar");return g(),V(B,null,[l(w,{title:"Posts"}),l(k,null,{default:s(()=>[a("div",N,[a("div",F,[L,l(x,{ref:"postTbl",apiUrl:n.apiUrl,columnFilters:n.filters,searchableColumns:n.searchableCols,can:p.can,onAddNew:r.addNew,onConfirmMultipleDeleteSelected:r.confirmMultipleDeleteSelected,onDeleteBtnStatus:r.deleteBtnStatus},{default:s(()=>[p.can.delete?(g(),b(c,{key:0,selectionMode:"multiple",headerStyle:"width: 3em"})):D("",!0),l(c,{field:"title",header:"Title",sortable:!0,style:{"min-width":"12rem"}},{filter:s(({filterModel:e})=>[l(v,{type:"text",modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,class:"p-column-filter",placeholder:"Search by title"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(c,{field:"category_id",header:"Category",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:s(e=>[a("span",null,S(e.data.category?e.data.category.name:""),1)]),filter:s(({filterModel:e})=>[l(C,{modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,options:n.categoryArray,optionLabel:"name",placeholder:"Any",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),l(c,{field:"sequence",header:"Sequence",sortable:!0,style:{"min-width":"12rem"}}),l(c,{field:"status",header:"Status",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:s(e=>[a("span",{class:U("text-white p-2 rounded-md "+(e.data.status==="ACT"?"bg-green-500":"bg-red-500"))},S(e.data.status),3)]),filter:s(({filterModel:e})=>[l(C,{modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,options:n.statuses,placeholder:"Any",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),l(c,{field:"actions",header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:s(e=>[l(u,{icon:"pi pi-eye",class:"p-button-rounded",style:{"margin-right":"5px"},onClick:i=>r.show(e.data.id)},null,8,["onClick"]),p.can.edit?(g(),b(u,{key:0,icon:"pi pi-pencil",class:"p-button-rounded p-button-warning",style:{"margin-right":"5px"},onClick:i=>r.edit(e.data.id)},null,8,["onClick"])):D("",!0),p.can.delete?(g(),b(u,{key:1,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:i=>r.confirmSingleDeleteSelected(e.data.id)},null,8,["onClick"])):D("",!0)]),_:1})]),_:1},8,["apiUrl","columnFilters","searchableColumns","can","onAddNew","onConfirmMultipleDeleteSelected","onDeleteBtnStatus"])])]),l(A,{visible:n.deletePostsDialog,"onUpdate:visible":m[1]||(m[1]=e=>n.deletePostsDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:s(()=>[l(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:m[0]||(m[0]=e=>n.deletePostsDialog=!1)}),l(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:r.deletePosts},null,8,["onClick"])]),default:s(()=>[E]),_:1},8,["visible"]),l(T)]),_:1})],64)}const H=P(I,[["render",O]]);export{H as default};
