import{D as k,h as p}from"./DataTable-2f4cad11.js";import{_ as T,d as _,h as g,i as A,a as w,r as s,o as h,c as B,b as t,w as a,F as N,e as l,j as b,g as y,t as f,n as I}from"./app-4793bf98.js";const V={components:{DataTable:k},data(){return{apiUrl:p("appointment.getData"),searchableCols:["mentee_id","mentor_id","method","opportunity_id","appointment_datetime"],statuses:["ACP","PND","DSBL"],methods:["ZOOM","EMAIL","IN_PERSON"],filters:null,deleteAppointmentDialog:!1,selectedAppointments:null,isDeleteSingleAppointment:!1,deleteId:null}},props:{can:{type:Object,default:()=>({})}},methods:{addNew(){_.Inertia.get(p("appointment.create"))},show(n){_.Inertia.get(p("appointment.show",n))},edit(n){_.Inertia.get(p("appointment.edit",n),{isTriggeredFromTable:!0})},initFilters(){this.filters={global:{value:null,matchMode:g.CONTAINS},method:{operator:A.OR,constraints:[{value:null,matchMode:g.STARTS_WITH}]},status:{operator:A.OR,constraints:[{value:null,matchMode:g.EQUALS}]}}},confirmMultipleDeleteSelected(){this.deleteAppointmentDialog=!0},confirmSingleDeleteSelected(n){this.deleteAppointmentDialog=!0,this.isDeleteSingleAppointment=!0,this.deleteId=n},deleteAppointments(){this.isDeleteSingleAppointment?w.delete(p("appointment.destroy",this.deleteId)).then(n=>{n.data.success&&this.$refs.appointmentTbl.loadLazyData()}).catch(n=>{this.$toast.add({severity:"error",summary:"Error Message",detail:n.response.data.message,life:3e3})}):w.delete(p("appointment.deleteMultipleRecord",{appointmentList:this.selectedAppointments})).then(n=>{n.data.success&&this.$refs.appointmentTbl.loadLazyData()}).catch(n=>{this.$toast.add({severity:"error",summary:"Error Message",detail:n.response.data.message,life:3e3})}),this.deleteId=null,this.selectedAppointments=null,this.isDeleteSingleAppointment=!1,this.deleteAppointmentDialog=!1},deleteBtnStatus(n){this.selectedAppointments=n}},created(){this.initFilters()}},U={class:"mx-auto flex container items-center justify-center mt-4"},F={class:"rounded w-full p-2 bg-white"},O=l("div",{class:"bg-white shadow sm:rounded-lg px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},[l("header",null,[l("h2",{class:"text-2xl font-bold text-gray-900"}," Appointments ")])],-1),E=l("div",{class:"confirmation-content"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Are you sure you want to delete the selected record(s)?")],-1);function L(n,c,u,R,i,d){const S=s("Head"),o=s("Column"),D=s("Dropdown"),m=s("Button"),C=s("DataTable"),v=s("Dialog"),x=s("Toast"),M=s("MenuSideBar");return h(),B(N,null,[t(S,{title:"Appointments"}),t(M,null,{default:a(()=>[l("div",U,[l("div",F,[O,t(C,{ref:"appointmentTbl",apiUrl:i.apiUrl,columnFilters:i.filters,searchableColumns:i.searchableCols,can:u.can,onAddNew:d.addNew,onConfirmMultipleDeleteSelected:d.confirmMultipleDeleteSelected,onDeleteBtnStatus:d.deleteBtnStatus},{default:a(()=>[u.can.delete?(h(),b(o,{key:0,selectionMode:"multiple",headerStyle:"width: 3em"})):y("",!0),t(o,{field:"mentee_id",header:"Mentee",sortable:!0,style:{"min-width":"12rem"}},{body:a(e=>[l("span",null,f(e.data.mentee?e.data.mentee.name:""),1)]),_:1}),t(o,{field:"mentor_id",header:"Mentor",sortable:!0,style:{"min-width":"12rem"}},{body:a(e=>[l("span",null,f(e.data.mentor?e.data.mentor.name:""),1)]),_:1}),t(o,{field:"method",header:"Method",sortable:!0,style:{"min-width":"12rem"}},{filter:a(({filterModel:e})=>[t(D,{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,options:i.methods,placeholder:"Any",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(o,{field:"opportunity_id",header:"Opportunity",sortable:!0,style:{"min-width":"12rem"}},{body:a(e=>[l("span",null,f(e.data.opportunity?e.data.opportunity.title:""),1)]),_:1}),t(o,{field:"appointment_datetime",header:"Appointment Datetime",sortable:!0,style:{"min-width":"12rem"}}),t(o,{field:"status",header:"Status",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:a(e=>[l("span",{class:I("text-white p-2 rounded-md "+(e.data.status==="ACP"?"bg-green-500":"bg-red-500"))},f(e.data.status),3)]),filter:a(({filterModel:e})=>[t(D,{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,options:i.statuses,placeholder:"Any",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(o,{field:"actions",header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:a(e=>[t(m,{icon:"pi pi-eye",class:"p-button-rounded bg-[#0078d4]",style:{"margin-right":"5px"},onClick:r=>d.show(e.data.id)},null,8,["onClick"]),u.can.edit?(h(),b(m,{key:0,icon:"pi pi-pencil",class:"p-button-rounded p-button-warning",style:{"margin-right":"5px"},onClick:r=>d.edit(e.data.id)},null,8,["onClick"])):y("",!0),u.can.delete?(h(),b(m,{key:1,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:r=>d.confirmSingleDeleteSelected(e.data.id)},null,8,["onClick"])):y("",!0)]),_:1})]),_:1},8,["apiUrl","columnFilters","searchableColumns","can","onAddNew","onConfirmMultipleDeleteSelected","onDeleteBtnStatus"])])]),t(v,{visible:i.deleteAppointmentDialog,"onUpdate:visible":c[1]||(c[1]=e=>i.deleteAppointmentDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[t(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:c[0]||(c[0]=e=>i.deleteAppointmentDialog=!1)}),t(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:d.deleteAppointments},null,8,["onClick"])]),default:a(()=>[E]),_:1},8,["visible"]),t(x)]),_:1})],64)}const H=T(V,[["render",L]]);export{H as default};
