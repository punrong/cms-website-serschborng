import{D as N,h as d}from"./DataTable-08a38a4e.js";import{_ as M,d as g,h,i as b,a as U,r as a,o as f,c as A,b as l,w as s,F as B,e as n,j as _,g as y,k as w,t as D,n as I}from"./app-2745b5b5.js";const F={components:{DataTable:N},data(){return{apiUrl:d("user.getData"),searchableCols:["name","email"],statuses:["ACT","PND","DSBL"],filters:null,deleteUsersDialog:!1,selectedUsers:null,isDeleteSingleUser:!1,deleteId:null}},props:{can:{type:Object,default:()=>({})}},methods:{addNew(){g.Inertia.get(d("user.create"))},show(t){g.Inertia.get(d("user.show",t))},edit(t){g.Inertia.get(d("user.edit",t),{isTriggeredFromTable:!0})},initFilters(){this.filters={global:{value:null,matchMode:h.CONTAINS},name:{operator:b.AND,constraints:[{value:null,matchMode:h.STARTS_WITH}]},email:{operator:b.AND,constraints:[{value:null,matchMode:h.STARTS_WITH}]},status:{operator:b.OR,constraints:[{value:null,matchMode:h.EQUALS}]}}},confirmMultipleDeleteSelected(){this.deleteUsersDialog=!0},confirmSingleDeleteSelected(t){this.deleteUsersDialog=!0,this.isDeleteSingleUser=!0,this.deleteId=t},deleteUsers(){this.isDeleteSingleUser?U.delete(d("user.destroy",this.deleteId)).then(t=>{t.data.success&&this.$refs.userTbl.loadLazyData()}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})}):U.delete(d("user.deleteMultipleRecord",{userList:this.selectedUsers})).then(t=>{t.data.success&&this.$refs.userTbl.loadLazyData()}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})}),this.deleteId=null,this.selectedUsers=null,this.isDeleteSingleUser=!1,this.deleteUsersDialog=!1},deleteBtnStatus(t){this.selectedUsers=t}},created(){this.initFilters()}},E={class:"mx-auto flex container items-center justify-center mt-4"},L={class:"rounded w-full p-2 bg-white"},z=n("div",{class:"bg-white shadow sm:rounded-lg px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},[n("header",null,[n("h2",{class:"text-2xl font-bold text-gray-900"},"Users")])],-1),H=n("div",{class:"confirmation-content"},[n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),n("span",null,"Are you sure you want to delete the selected record(s)?")],-1);function O(t,m,p,R,i,r){const x=a("Head"),c=a("Column"),S=a("InputText"),C=a("Dropdown"),u=a("Button"),v=a("DataTable"),T=a("Dialog"),k=a("Toast"),V=a("MenuSideBar");return f(),A(B,null,[l(x,{title:"Users"}),l(V,null,{default:s(()=>[n("div",E,[n("div",L,[z,l(v,{ref:"userTbl",apiUrl:i.apiUrl,columnFilters:i.filters,searchableColumns:i.searchableCols,can:p.can,onAddNew:r.addNew,onConfirmMultipleDeleteSelected:r.confirmMultipleDeleteSelected,onDeleteBtnStatus:r.deleteBtnStatus},{default:s(()=>[p.can.delete?(f(),_(c,{key:0,selectionMode:"multiple",headerStyle:"width: 3em"})):y("",!0),l(c,{field:"name",header:"Name",sortable:!0,style:{"min-width":"12rem"}},{body:s(({data:e})=>[w(D(e.name),1)]),filter:s(({filterModel:e})=>[l(S,{type:"text",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(c,{field:"email",header:"Email",sortable:!0,style:{"min-width":"12rem"}},{body:s(({data:e})=>[w(D(e.email),1)]),filter:s(({filterModel:e})=>[l(S,{type:"text",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(c,{field:"status",header:"Status",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:s(e=>[n("span",{class:I("text-white p-2 rounded-md "+(e.data.status==="ACT"?"bg-green-500":"bg-red-500"))},D(e.data.status),3)]),filter:s(({filterModel:e})=>[l(C,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,options:i.statuses,placeholder:"Any",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),l(c,{field:"actions",header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:s(e=>[l(u,{icon:"pi pi-eye",class:"p-button-rounded bg-[#0078d4]",style:{"margin-right":"5px"},onClick:o=>r.show(e.data.id)},null,8,["onClick"]),p.can.edit?(f(),_(u,{key:0,icon:"pi pi-pencil",class:"p-button-rounded p-button-warning",style:{"margin-right":"5px"},onClick:o=>r.edit(e.data.id)},null,8,["onClick"])):y("",!0),p.can.delete?(f(),_(u,{key:1,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:o=>r.confirmSingleDeleteSelected(e.data.id)},null,8,["onClick"])):y("",!0)]),_:1})]),_:1},8,["apiUrl","columnFilters","searchableColumns","can","onAddNew","onConfirmMultipleDeleteSelected","onDeleteBtnStatus"])])]),l(T,{visible:i.deleteUsersDialog,"onUpdate:visible":m[1]||(m[1]=e=>i.deleteUsersDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:s(()=>[l(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:m[0]||(m[0]=e=>i.deleteUsersDialog=!1)}),l(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:r.deleteUsers},null,8,["onClick"])]),default:s(()=>[H]),_:1},8,["visible"]),l(k)]),_:1})],64)}const Q=M(F,[["render",O]]);export{Q as default};
