import{D as M,h as d}from"./DataTable-d371b4a6.js";import{_ as B,d as f,h as g,i as y,a as D,r as l,o as h,c as N,b as s,w as i,F as I,e as n,j as b,g as _,k as V,t as S,n as A}from"./app-541770c2.js";const U={components:{DataTable:M},data(){return{apiUrl:d("permission.getData"),searchableCols:["name"],statuses:["ACT","DSBL"],filters:null,deletePermissionsDialog:!1,selectedPermissions:null,isDeleteSinglePermission:!1,deleteId:null}},props:{can:{type:Object,default:()=>({})}},methods:{addNew(){f.Inertia.get(d("permission.create"))},show(t){f.Inertia.get(d("permission.show",t))},edit(t){f.Inertia.get(d("permission.edit",t),{isTriggeredFromTable:!0})},initFilters(){this.filters={global:{value:null,matchMode:g.CONTAINS},name:{operator:y.AND,constraints:[{value:null,matchMode:g.STARTS_WITH}]},status:{operator:y.OR,constraints:[{value:null,matchMode:g.EQUALS}]}}},confirmMultipleDeleteSelected(){this.deletePermissionsDialog=!0},confirmSingleDeleteSelected(t){this.deletePermissionsDialog=!0,this.isDeleteSinglePermission=!0,this.deleteId=t},deletePermissions(){this.isDeleteSinglePermission?D.delete(d("permission.destroy",this.deleteId)).then(t=>{t.data.success&&this.$refs.permissionTbl.loadLazyData()}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})}):D.delete(d("permission.deleteMultipleRecord",{permissionList:this.selectedPermissions})).then(t=>{t.data.success&&this.$refs.permissionTbl.loadLazyData()}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})}),this.deleteId=null,this.selectedPermissions=null,this.isDeleteSinglePermission=!1,this.deletePermissionsDialog=!1},deleteBtnStatus(t){this.selectedPermissions=t}},created(){this.initFilters()}},F={class:"mx-auto flex container items-center justify-center mt-4"},L={class:"rounded w-full p-2 bg-white"},z=n("div",{class:"bg-white shadow sm:rounded-lg px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},[n("header",null,[n("h2",{class:"text-2xl font-bold text-gray-900"}," Permissions ")])],-1),E=n("div",{class:"confirmation-content"},[n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),n("span",null,"Are you sure you want to delete the selected record(s)?")],-1);function O(t,m,u,j,a,o){const C=l("Head"),p=l("Column"),w=l("InputText"),x=l("Dropdown"),c=l("Button"),v=l("DataTable"),T=l("Dialog"),k=l("Toast"),P=l("MenuSideBar");return h(),N(I,null,[s(C,{title:"Permissions"}),s(P,null,{default:i(()=>[n("div",F,[n("div",L,[z,s(v,{ref:"permissionTbl",apiUrl:a.apiUrl,columnFilters:a.filters,searchableColumns:a.searchableCols,onDeleteBtnStatus:o.deleteBtnStatus,can:u.can,onAddNew:o.addNew,onConfirmMultipleDeleteSelected:o.confirmMultipleDeleteSelected},{default:i(()=>[u.can.delete?(h(),b(p,{key:0,selectionMode:"multiple",headerStyle:"width: 3em"})):_("",!0),s(p,{field:"name",header:"Name",sortable:!0,style:{"min-width":"12rem"}},{body:i(({data:e})=>[V(S(e.name),1)]),filter:i(({filterModel:e})=>[s(w,{type:"text",modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(p,{field:"status",header:"Status",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:i(e=>[n("span",{class:A("text-white p-2 rounded-md "+(e.data.status==="ACT"?"bg-green-500":"bg-red-500"))},S(e.data.status),3)]),filter:i(({filterModel:e})=>[s(x,{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,options:a.statuses,placeholder:"Any",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),s(p,{field:"actions",header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:i(e=>[s(c,{icon:"pi pi-eye",class:"p-button-rounded bg-[#0078d4]",style:{"margin-right":"5px"},onClick:r=>o.show(e.data.id)},null,8,["onClick"]),u.can.edit?(h(),b(c,{key:0,icon:"pi pi-pencil",class:"p-button-rounded p-button-warning",style:{"margin-right":"5px"},onClick:r=>o.edit(e.data.id)},null,8,["onClick"])):_("",!0),u.can.delete?(h(),b(c,{key:1,icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:r=>o.confirmSingleDeleteSelected(e.data.id)},null,8,["onClick"])):_("",!0)]),_:1})]),_:1},8,["apiUrl","columnFilters","searchableColumns","onDeleteBtnStatus","can","onAddNew","onConfirmMultipleDeleteSelected"])])]),s(T,{visible:a.deletePermissionsDialog,"onUpdate:visible":m[1]||(m[1]=e=>a.deletePermissionsDialog=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[s(c,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:m[0]||(m[0]=e=>a.deletePermissionsDialog=!1)}),s(c,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:o.deletePermissions},null,8,["onClick"])]),default:i(()=>[E]),_:1},8,["visible"]),s(k)]),_:1})],64)}const Q=B(U,[["render",O]]);export{Q as default};
