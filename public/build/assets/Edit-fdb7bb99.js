import{_ as D,a as p,d as m,r as n,o as v,c as E,b as e,w as b,F as S,e as s,p as w,f as M}from"./app-2aa138e6.js";import{_ as L}from"./InputError-f166d74f.js";import{E as I}from"./Editor-bf64bfff.js";const V={components:{InputError:L,Editor:I},data(){return{formData:{},statuses:{ACT:"ACTIVE",DSBL:"DISABLED"},categoryList:{},errorMsg:null,mentorList:null}},props:{post:{type:Object,default:()=>({})},isTriggeredFromTable:{type:Boolean,default:!1}},methods:{initForm(){this.formData=this.post},onSubmit(){const t=new FormData;t.append("title",this.formData.title),t.append("author",this.formData.author),t.append("category_id",this.formData.category_id),t.append("status",this.formData.status),t.append("description",this.formData.description),this.formData.sequence&&t.append("sequence",this.formData.sequence);for(var o=0;o<this.formData.mentors.length;o++)t.append("mentors[]",this.formData.mentors[o]);t.append("image",this.formData.image),t.append("_method","PUT");const c={headers:{"content-type":"multipart/form-data"}};p.post(route("post.update",this.formData.id),t,c).then(i=>{i.data.success&&m.Inertia.visit(route("post.index"))}).catch(i=>{i.response.status===422&&(this.errorMsg=i.response.data.message),this.$toast.add({severity:"error",summary:"Error Message",detail:i.response.data.message,life:3e3})})},goBack(){this.isTriggeredFromTable?m.Inertia.visit(route("post.index")):m.Inertia.get(route("post.show",this.formData.id))},getCategoryList(){p.get(route("category.getCategoryList")).then(t=>{this.categoryList=t.data}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})})},updateEditorData(t){this.formData.description=t},getMentorListAsArray(){p.get(route("mentor.getMentorListAsArray")).then(t=>{this.mentorList=t.data}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})})}},created(){this.initForm()},mounted(){this.getCategoryList(),this.getMentorListAsArray()}},u=t=>(w("data-v-7da33a5e"),t=t(),M(),t),B={class:"mx-auto flex container items-center justify-center mt-4"},A={class:"rounded w-full p-2 bg-white"},T={class:"px-4 bg-white shadow sm:rounded-lg"},k=u(()=>s("div",{class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},[s("header",null,[s("h2",{class:"text-lg font-medium text-gray-900"}," Post Information "),s("p",{class:"mt-1 text-sm text-gray-600"}," Update post's title, cattegory, status, image, and description ")])],-1)),C={class:"grid grid-cols-3 gap-x-4"},F={class:"grid grid-cols-3 gap-x-4"},q=u(()=>s("span",{class:"block font-bold text-base"},"Mentors",-1)),U={class:"py-1"},j={class:"pb-4 mb-1"},P=u(()=>s("span",{class:"block mb-1 font-bold text-base"},"Description *",-1));function H(t,o,c,i,a,l){const f=n("Head"),r=n("FormKit"),_=n("MultiSelect"),g=n("InputError"),h=n("Editor"),y=n("Toast"),x=n("MenuSideBar");return v(),E(S,null,[e(f,{title:"Posts"}),e(x,null,{default:b(()=>[s("div",B,[s("div",A,[e(r,{type:"button",label:"Go Back",onClick:o[0]||(o[0]=d=>l.goBack()),classes:{outer:"mb-2",input:"bg-blue-500 text-white font-bold px-3 mb-2 w-auto rounded-md py-2"}}),s("div",T,[k,e(r,{type:"form",modelValue:a.formData,"onUpdate:modelValue":o[3]||(o[3]=d=>a.formData=d),onSubmit:l.onSubmit,actions:!1,config:{classes:{label:"block mb-1 font-bold text-base",input:"w-full rounded-md py-2",help:"text-xs text-gray-500",message:"text-red-500 text-sm font-bold",messages:"pt-2"}}},{default:b(()=>[s("div",C,[e(r,{type:"text",label:"Title *",name:"title",validation:"required",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}}),e(r,{type:"select",label:"Category *",options:a.categoryList,modelValue:a.formData.category_id,"onUpdate:modelValue":o[1]||(o[1]=d=>a.formData.category_id=d),placeholder:"Select a category",validation:"required",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}},null,8,["options","modelValue"]),e(r,{type:"select",label:"Status *",options:a.statuses,name:"status",validation:"required",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}},null,8,["options"])]),s("div",F,[e(r,{type:"text",label:"Author(s)",name:"author",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}}),e(r,{type:"number",label:"Sequence",name:"sequence",validation:"number|min:1",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}}),s("div",null,[q,s("div",U,[e(_,{modelValue:a.formData.mentors,"onUpdate:modelValue":o[2]||(o[2]=d=>a.formData.mentors=d),class:"w-full rounded-md",optionValue:"value",options:a.mentorList,optionLabel:"name",placeholder:"Select mentors"},null,8,["modelValue","options"]),e(g,{class:"text-red-500 text-sm font-bold",message:a.errorMsg},null,8,["message"])])])]),e(r,{type:"image",label:"Image (2MB max)",name:"image",accept:".jpg,.png,.jpeg",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}}),s("div",j,[P,e(h,{content:a.formData.description,onUpdateEditorData:l.updateEditorData},null,8,["content","onUpdateEditorData"]),e(g,{class:"text-red-500 text-sm font-bold",message:a.errorMsg},null,8,["message"])]),e(r,{type:"submit",label:"Update",classes:{outer:"m-0 text-right",input:"$reset rounded-md py-2 bg-blue-500 text-white font-bold px-3 w-auto mb-2"}})]),_:1},8,["modelValue","onSubmit"])])])]),e(y)]),_:1})],64)}const O=D(V,[["render",H],["__scopeId","data-v-7da33a5e"]]);export{O as default};
