import{_ as x,a as m,d as u,r as n,o as D,c as v,b as e,w as g,F as E,e as s,p as S,f as w}from"./app-2aa138e6.js";import{_ as C}from"./InputError-f166d74f.js";import{E as L}from"./Editor-bf64bfff.js";const M={components:{InputError:C,Editor:L},data(){return{formData:{title:null,status:"ACT",author:"",category_id:null,image:null,description:"",mentors:null,sequence:null},statuses:{ACT:"ACTIVE",DSBL:"DISABLED"},categoryList:{},errorMsg:null,mentorList:null}},methods:{onSubmit(){const t=new FormData;if(t.append("title",this.formData.title),t.append("author",this.formData.author),t.append("category_id",this.formData.category_id),t.append("status",this.formData.status),this.formData.sequence&&t.append("sequence",this.formData.sequence),t.append("description",this.formData.description),this.formData.mentors&&this.formData.mentors.length>0)for(var o=0;o<this.formData.mentors.length;o++)t.append("mentors[]",this.formData.mentors[o]);t.append("image",this.formData.image),m.post(route("post.store"),t).then(i=>{i.data.success&&u.Inertia.visit(route("post.index"))}).catch(i=>{i.response.status===422&&(this.errorMsg=i.response.data.message),this.$toast.add({severity:"error",summary:"Error Message",detail:i.response.data.message,life:3e3})})},goBack(){u.Inertia.visit(route("post.index"))},getCategoryList(){m.get(route("category.getCategoryList")).then(t=>{this.categoryList=t.data}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})})},updateEditorData(t){this.formData.description=t},getMentorListAsArray(){m.get(route("mentor.getMentorListAsArray")).then(t=>{this.mentorList=t.data}).catch(t=>{this.$toast.add({severity:"error",summary:"Error Message",detail:t.response.data.message,life:3e3})})}},mounted(){this.getCategoryList(),this.getMentorListAsArray()}},p=t=>(S("data-v-01078c2c"),t=t(),w(),t),V={class:"mx-auto flex container items-center justify-center mt-4"},A={class:"rounded w-full p-2 bg-white"},I={class:"px-4 bg-white shadow sm:rounded-lg"},B=p(()=>s("div",{class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},[s("header",null,[s("h2",{class:"text-lg font-medium text-gray-900"}," Create New Post "),s("p",{class:"mt-1 text-sm text-gray-600"}," Add post's title, category, status, image, and description ")])],-1)),k={class:"grid grid-cols-3 gap-x-4"},q={class:"grid grid-cols-3 gap-x-4"},T=p(()=>s("span",{class:"block font-bold text-base"},"Mentors",-1)),F={class:"py-1"},U={class:"pb-4 mb-1"},j=p(()=>s("span",{class:"block mb-1 font-bold text-base"},"Description *",-1));function N(t,o,i,H,a,d){const b=n("Head"),r=n("FormKit"),_=n("MultiSelect"),c=n("InputError"),f=n("Editor"),h=n("Toast"),y=n("MenuSideBar");return D(),v(E,null,[e(b,{title:"Posts"}),e(y,null,{default:g(()=>[s("div",V,[s("div",A,[e(r,{type:"button",label:"Go Back",onClick:o[0]||(o[0]=l=>d.goBack()),classes:{outer:"mb-2",input:"bg-blue-500 text-white font-bold px-3 mb-2 w-auto rounded-md py-2"}}),s("div",I,[B,e(r,{type:"form",modelValue:a.formData,"onUpdate:modelValue":o[3]||(o[3]=l=>a.formData=l),onSubmit:d.onSubmit,actions:!1,config:{classes:{label:"block mb-1 font-bold text-base",input:"w-full rounded-md py-2",help:"text-xs text-gray-500",message:"text-red-500 text-sm font-bold",messages:"pt-2"}}},{default:g(()=>[s("div",k,[e(r,{type:"text",label:"Title *",name:"title",validation:"required",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}}),e(r,{type:"select",label:"Category *",options:a.categoryList,modelValue:a.formData.category_id,"onUpdate:modelValue":o[1]||(o[1]=l=>a.formData.category_id=l),placeholder:"Select a category",validation:"required",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}},null,8,["options","modelValue"]),e(r,{type:"select",label:"Status *",options:a.statuses,name:"status",validation:"required",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}},null,8,["options"])]),s("div",q,[e(r,{type:"text",label:"Author(s)",name:"author",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}}),e(r,{type:"number",label:"Sequence",name:"sequence",validation:"number|min:1",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}}),s("div",null,[T,s("div",F,[e(_,{modelValue:a.formData.mentors,"onUpdate:modelValue":o[2]||(o[2]=l=>a.formData.mentors=l),class:"w-full rounded-md",optionValue:"value",options:a.mentorList,optionLabel:"name",placeholder:"Select mentors"},null,8,["modelValue","options"]),e(c,{class:"text-red-500 text-sm font-bold",message:a.errorMsg},null,8,["message"])])])]),e(r,{type:"image",label:"Image",name:"image",accept:".jpg,.png,.jepg",classes:{outer:"pb-4",input:"border border-gray-400 px-2 mb-1"}}),s("div",U,[j,e(f,{content:a.formData.description,onUpdateEditorData:d.updateEditorData},null,8,["content","onUpdateEditorData"]),e(c,{class:"text-red-500 text-sm font-bold",message:a.errorMsg},null,8,["message"])]),e(r,{type:"submit",label:"Create",classes:{outer:"m-0 text-right",input:"$reset rounded-md py-2 bg-blue-500 text-white font-bold px-3 w-auto mb-2"}})]),_:1},8,["modelValue","onSubmit"])])])]),e(h)]),_:1})],64)}const z=x(M,[["render",N],["__scopeId","data-v-01078c2c"]]);export{z as default};
